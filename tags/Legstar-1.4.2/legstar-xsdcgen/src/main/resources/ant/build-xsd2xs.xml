<!-- =================================================================================
     This script generates a Mapping XML Schema from an XML Schema or WSDL.
  -->
<project basedir="." default="annotateXSD" name="annotate-XSD">

  <!-- ===========================================================  -->
  <!-- Setup environment
    -->
  <target name="init">
    
    <!-- Schema or Wsdl name   -->
    <property name="schema.name" value="cultureinfo" />
    <!-- URI for input XML schema or WSDL  -->
    <property name="in.uri" value="http://localhost:8080/jaxws-cultureinfo/getinfo?xsd=1" />
    <!-- Target location for generated XML schema   -->
    <property name="xsd.dir" value="schema" />
    <!-- Name of generated XSD file  -->
    <property name="xsd.filename" value="${schema.name}.xsd" />
      
    <!-- Classpath setting -->
    <path id="classpath">
        <fileset dir="${basedir}/../../.." includes="lib/*.jar" />
    </path>

    <!-- XSD/WSDL Mapping Generator ant task -->
    <taskdef name="xsdcgen"
      classname="com.legstar.xsdc.gen.XsdCobolAnnotator"
      classpathref="classpath"/>
  
  </target>

  <!-- ===========================================================  -->
  <!-- Generate a Mapping XML Schema.
    -->
  <target name="annotateXSD" depends="init">
    <echo message="Generating annotated schema for ${in.uri}" />
    <mkdir dir="${xsd.dir}"/>
    <xsdcgen 
      inputXsdUri="${in.uri}"
      targetDir="${xsd.dir}"
      targetXsdFileName="${xsd.filename}"
    />
    <echo message="XML Schema successfully generated ${xsd.dir}/${xsd.filename}" />
  </target>

</project>
