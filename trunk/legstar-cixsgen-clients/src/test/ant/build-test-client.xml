<?xml version="1.0" encoding="UTF-8"?>
<!-- =================================================================================
    This script generates Web Service clients for each of the Web Services
    generated in cixsgen.
 -->
<project basedir="../../.." default="generateAllJAXWSClients" name="build">

	<!-- Target Tomcat location   -->
    <property file="../legstar-pom/legstar-dev.properties"/>   

	<!-- Ant-Contrib tasks. Needed for "foreach ", regex, switch, ...
	     (ant-contrib.jar must be in ant classpath) -->
    <taskdef resource="net/sf/antcontrib/antcontrib.properties">
    	<classpath>
		    <pathelement location="C:\Program Files\Apache\antcontrib\ant-contrib-1.0b2-bin\ant-contrib\lib\ant-contrib.jar"/>
    	</classpath>
    </taskdef>
	
	<path id="jaxws.classpath">
        <fileset dir="D:\Legsem\Legstar\dependencies\jaxws-ri-2.1.1" includes="lib/*.jar" />
    </path>

    <taskdef name="wsimport" classname="com.sun.tools.ws.ant.WsImport">
		<classpath refid="jaxws.classpath"/>
	</taskdef>

	<!-- Generate JAXWS client artifacts for each CIXWS generated Web Service.        -->
	<target name="generateAllJAXWSClients">
		<foreach target="generateJAXWSClient" param="cixs.dir">
			<path>
				<dirset dir="${basedir}/../legstar-cixsgen-cases/src/main/resources/ant" includes="*"/>
			</path>
		</foreach>
	</target>

	<target name="generateJAXWSClient" description="Create JAXWS Web Service clients">
		
		 <basename property="service-name" file="${cixs.dir}"  suffix=".xsd"/>
		 <echo>Processing ${service-name}</echo>
		 <wsimport
		 	debug="true"
		 	verbose="true"
		 	keep="true"
		 	destdir="src/test/java"
		 	wsdl="http://localhost:8080/cixs-${service-name}/${service-name}?wsdl">
		 </wsimport>
		
  	</target>
  
</project>