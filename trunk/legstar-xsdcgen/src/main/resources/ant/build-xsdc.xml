<!-- =================================================================================
     This script generates a Cobol-annotated XML Schema from an XML Schema or WSDL.
  -->
<project basedir=".." default="annotateXSD" name="annotate-XSD">

  <!-- ===========================================================  -->
  <!-- Setup environment
    -->
  <target name="init">
    
    <!-- Schema or Wsdl name   -->
    <property name="schema.name" value="cultureinfo" />
    <!-- URI for input XML schema or WSDL  -->
    <property name="in.uri" value="http://localhost:8080/jaxws-cultureinfo/getinfo?xsd=1" />
    <!-- Target location for generated XML schema   -->
    <property name="schema.dir" value="schema" />
    <!-- Name of generated XSD file  -->
    <property name="gen.file.name" value="${schema.name}.xsd" />
    <!-- Target package for generated JAXB classes   -->
    <property name="jaxb.package.name" value="com.legstar.test.coxb.${schema.name}" />
      
    <!-- Classpath setting -->
    <path id="classpath">
        <fileset dir="${basedir}" includes="lib/*.jar" />
      </path>

    <!-- XSD/WSDL to COBOL Structures Generator ant task -->
    <taskdef name="xsdcgen"
      classname="com.legstar.xsdc.gen.XsdCobolAnnotator"
      classpathref="classpath"/>
  
  </target>

  <!-- ===========================================================  -->
  <!-- Generate a Cobol-annotated XML Schema.
    -->
  <target name="annotateXSD" depends="init">
    <echo message="Generating annotated schema for ${in.uri}" />
    <mkdir dir="${schema.dir}"/>
    <xsdcgen 
      inputXsdUri="${in.uri}"
      targetDir="${schema.dir}"
      targetXsdFileName="${gen.file.name}"
      jaxbTypeClassesSuffix="Type"
      jaxbPackageName="${jaxb.package.name}"  
    />
    <echo message="XML Schema successfully generated ${schema.dir}/${gen.file.name}" />
  </target>

</project>
