<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
	<title>Schema Generator</title>
	<link rel="stylesheet" type="text/css" href="style.css" />
	<link rel="stylesheet" type="text/css" href="../../../yui/fonts/fonts-min.css" />
	<link rel="stylesheet" type="text/css" href="../../../yui/container/assets/skins/sam/container.css" />
	<script type="text/javascript" src="../../../yui/yahoo/yahoo.js"></script>  
	<script type="text/javascript" src="../../../yui/dom/dom.js"></script>  
	<script type="text/javascript" src="../../../yui/utilities/utilities.js"></script>
	<script type="text/javascript" src="../../../yui/yahoo-dom-event/yahoo-dom-event.js"></script>
	<script type="text/javascript" src="../../../yui/animation/animation-min.js"></script>
	<script type="text/javascript" src="../../../yui/container/container-min.js"></script>
	<script type="text/javascript" src="../../../yui/connection/connection-min.js"></script>
	<script type="text/javascript">
	    var cobolPanel;
	    
		function init(){
			// Asynchronous load of the cobol file
			var onUploadButtonClick = function(e){
				YAHOO.util.Connect.setForm('uploadForm', true);
			
				var uploadHandler = {
					upload: function(o) {
						YAHOO.util.Dom.get('cobeditArea').value = o.responseText.replace(/(<([^>]+)>)/ig,"");
					}
				};
				YAHOO.util.Connect.asyncRequest('POST', '/cgi-bin/legstar/legstar-schemagen-web/upload.cgi', uploadHandler);
			};
			YAHOO.util.Event.on('uploadButton', 'click', onUploadButtonClick);

 			// A simple editor
			cobolPanel = new YAHOO.widget.Panel("cobeditPanel", {
			    width: "640px",
				underlay: "shadow", 
				close: true, 
				visible: false, 
				draggable: true} );
			cobolPanel.setHeader("Cobol Editor");
			cobolPanel.cfg.width = "640px";
  			cobolPanel.show();
		}

		YAHOO.util.Event.on(window, 'load', init);
	</script>
</head>
<body class="yui-skin-sam">
    <div id="appPanel">
 		<h1>COBOL Structures Mapping Generator</h1>
		<p>You can upload a cobol file from your hard drive or copy/paste/type directly into the Cobol Editor.
		Click on the Generate button to get a mapping XML Schema.</p>
		<p><a href="mailto:admin@legsem.com">Questions?</a></p>
		<div id="uploadPanel">
			<form action="/cgi-bin/legstar/legstar-schemagen-web/upload.cgi" enctype="multipart/form-data" method="post" id="uploadForm">
				<label for="cobolFile" id="cobolFileLabel">Select a file:</label>
				<input type="file" name="cobolFile" id="cobolFile"/>
				<div id="uploadButtonDiv">
					<input type="button" id="uploadButton" value="Upload" class="actionButton"/>
				</div>
			</form>
		</div>
		<div id="cobeditPanel">
			<div class="hd"></div>
			<div class="bd">
				<form action="/cgi-bin/legstar/legstar-schemagen-web/genxsd.cgi" method="post" id="genForm">
					<textarea name="cobeditArea" id="cobeditArea" rows="25" cols="20"></textarea>
					<input type="submit" id="submitButton" value="Generate" class="actionButton" onclick="this.form.target='_blank';return true;"/>
				</form>
			</div>
			<div class="ft">The LegStar COBOL Structures Mapping Generator is a free service offered with no warranty whatsoever.</div>
		</div>
	</div>
</body>
</html>